<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style/index.css">
    <script src="js/jquery-3.6.0.js"></script>
</head>

<body>
    <a target="_blank" href="https://www.renesas.com/"><img src="img/renesas_logomark_s.jpg" class="logo"></a><br><br><br>

    <ol id="nav" title="Lab Contents" class="sidebar-lists">
        <li><a href="index.html">Home</a></li>
        <li><a href="1-Download-And-Install.html">1. Download & Install e<sup>2</sup>studio</a></li>
        <li><a href="2-First-Time-Launch.html">2. Launching e<sup>2</sup>studio for RL78</a></li>
        <li><a href="3-Project-Creation.html">3. Creating a Project</a></li>
        <li><a href="4-Project-Configuration.html">4. Configuring a Project</a></li>
        <li><a href="5-Project-Build.html">5. Building a Project</a></li>
        <li class="activeListItem"><a class="active" href="6-Project-Debug.html">6. Debugging a Project</a></li>
    </ol>

    <h1>6. Debugging a Project</h1>
    <p>Here we will guide you through debugging a project for the RL78.
    </p>

    <h2 id="6.1">6.1 - Launching Debug Session</h2>
    <p>First ensure the project you wish to debug is active by clicking on it then select the debug icon.<br>
        <b>Important:</b><br>
        If you <b>do not</b> have the RL78/G23 128p FPB hardware, when presented with the "Select Configuration" dialog then select <b>HelloWorld Debug</b>.<br>
        If you <b>do</b> have the RL78/G23 128p FPB hardware, when presented with the "Select Configuration" dialog then select <b>HelloWorld HardwareDebug</b>.<br>
        e<sup>2</sup>studio will promt you and ask if you would like to switch to the debug perspecive, answer in the affirmative i.e. "Switch"as this
        will provide you with all the default tools and views used for debugging an embedded application.<br>
        The animation below shows this routine for the simulator, but the steps are the same for hardware debugging, with the only caveat being the selected debug configuration.<br>
        
        <a target="_blank" href="img/launchdebug.gif"><img src="img/launchdebug.gif" class="zoomable"></a><br>
    </p>

    <h2 id="6.2">6.2 - Breakpoint, Run & Stepping</h2>
    <p>When the application first runs, it will pause on entry to the main function.<br>
        By double-clicking on the grey bar next to the code of interest we can insert a break point and halt execution when the CPU executes that line of code.<br>
        <a target="_blank" href="img/installbreakpoint.gif"><img src="img/installbreakpoint.gif" class="zoomable"></a><br>
        Now we can click the Run button, and once we hit this breakpoint we can step through the code using the step over or step into buttons.<br>
        <a target="_blank" href="img/runstep.gif"><img src="img/runstep.gif" class="zoomable"></a><br>
        And finally we can use nistruction stepping mode (Instruction Step button) to step through the assembly generated from the c code, to more granularly debug the program.<br>
        <a target="_blank" href="img/asmstep.gif"><img src="img/asmstep.gif" class="zoomable"></a><br>
    </p>

    <h2 id="6.3">6.3 - Expression Window</h2>
    <p>Now we can use something called the expression window, to observe <b>global</b> variables while the program is in the halted state,
        so while we step through the code we can observe how variables are changing.<br>
        First open the expression window:<br>
        <b>[Window] &rarr; [Show View] &rarr; [Other...]</b><br>
        Then search for expression and open this view,the view should appear somewhere in e<sup>2</sup>studio.<br>
        <a target="_blank" href="img/openexpressions.gif"><img src="img/openexpressions.gif" class="zoomable"></a><br>

        Now add the my_counter variable to the expression window by double-clicking the variable name to highlight, then holding the mouse down drag and drop the variable to the expression window.<br>
        You will see the my_counter variable appear with its current value (note this can only be done while the program is not executing - otherwise there will be no data present for the variable).<br>
        <a target="_blank" href="img/addingvariable.gif"><img src="img/addingvariable.gif" class="zoomable"></a><br>
    </p>

    <h2 id="6.4">6.4 - Real-time Refresh</h2>
    <p>Now to avoid constantly pausing program execution manually, we trigger e<sup>2</sup>studio to periodically halt the CPU, read the memory and start it running again with
        a feature call real-time refresh. this refresh's variable states in the expression window periodically.
        There is a limitation to the period we can do this of 100ms - that is we cannot go quicker than this.<br>
        To enable real-time refresh, first disbale the breakpoint by double-clicking (this will allow the CPU to run freely).
        Then in the expression window <b>[Right Click] the my_counter variable &rarr; [Enable Real-time Refresh]</b><br>
        Again in the expression window <b>[Right Click] the my_counter variable &rarr; [Real-time Refresh] &rarr; [Real-time Refresh Interval]</b><br>
        and in the dialog write 100 (fastest we can sample).<br>
        Finally click the Run button to start the program running and observe the counter change value in "real time".<br>
        The animation below shows this process.<br>
        <a target="_blank" href="img/realtimerunning.gif"><img src="img/realtimerunning.gif" class="zoomable"></a><br>

        <b>Note</b> this feature has a performance impact. Specifically in the case of RL78, the CPU must be halted by the debugger before the memory is read, which pauses execution of the program momentarily.<br>
    </p>
    
    <br><br>
    <button class="nextPageButton" onclick="document.location='index.html'">Finished!</button>
    
</body>
<script src="js/localnav.js"></script>

</html>